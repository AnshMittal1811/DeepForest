

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>deepforest package &mdash; DeepForest 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Training new models - An Overview" href="../training.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> DeepForest
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">What is DeepForest?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html#prebuilt-models">Prebuilt models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html#training">Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html#evaluation">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html#prediction">Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training.html">Training new models - An Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">deepforest package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-deepforest.cli">deepforest.cli module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-deepforest.deepforest">deepforest.deepforest module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-deepforest.predict">deepforest.predict module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-deepforest.preprocess">deepforest.preprocess module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-deepforest.retinanet_train">deepforest.retinanet_train module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-deepforest.tfrecords">deepforest.tfrecords module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-deepforest.utilities">deepforest.utilities module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-deepforest">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DeepForest</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>deepforest package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/deepforest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deepforest-package">
<h1>deepforest package<a class="headerlink" href="#deepforest-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-deepforest.cli">
<span id="deepforest-cli-module"></span><h2>deepforest.cli module<a class="headerlink" href="#module-deepforest.cli" title="Permalink to this headline">¶</a></h2>
<p>Console script for deepforest.</p>
<dl class="function">
<dt id="deepforest.cli.main">
<code class="sig-prename descclassname">deepforest.cli.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/cli.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.cli.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Console script for deepforest.</p>
</dd></dl>

</div>
<div class="section" id="module-deepforest.deepforest">
<span id="deepforest-deepforest-module"></span><h2>deepforest.deepforest module<a class="headerlink" href="#module-deepforest.deepforest" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-deepforest"></span><dl class="class">
<dt id="deepforest.deepforest.deepforest">
<em class="property">class </em><code class="sig-prename descclassname">deepforest.deepforest.</code><code class="sig-name descname">deepforest</code><span class="sig-paren">(</span><em class="sig-param">weights=None</em>, <em class="sig-param">saved_model=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/deepforest.html#deepforest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.deepforest.deepforest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for training and predicting tree crowns in RGB images</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weights</strong> (<em>str</em>) – Path to model saved on disk from keras.model.save_weights(). A new model is created and weights are copied. Default is None.</p></li>
<li><p><strong>saved_model</strong> – Path to a saved model from disk using keras.model.save(). No new model is created.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="deepforest.deepforest.deepforest.model">
<code class="sig-name descname">model</code><a class="headerlink" href="#deepforest.deepforest.deepforest.model" title="Permalink to this definition">¶</a></dt>
<dd><p>A keras training model from keras-retinanet</p>
</dd></dl>

<dl class="method">
<dt id="deepforest.deepforest.deepforest.evaluate_generator">
<code class="sig-name descname">evaluate_generator</code><span class="sig-paren">(</span><em class="sig-param">annotations</em>, <em class="sig-param">comet_experiment=None</em>, <em class="sig-param">iou_threshold=0.5</em>, <em class="sig-param">score_threshold=0.05</em>, <em class="sig-param">max_detections=200</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/deepforest.html#deepforest.evaluate_generator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.deepforest.deepforest.evaluate_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate prediction model using a csv fit_generator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>annotations</strong> (<em>str</em>) – Path to csv label file, labels are in the format -&gt; path/to/image.jpg,x1,y1,x2,y2,class_name</p></li>
<li><p><strong>iou_threshold</strong> (<em>float</em>) – IoU Threshold to count for a positive detection (defaults to 0.5)</p></li>
<li><p><strong>score_threshold</strong> (<em>float</em>) – Eliminate bounding boxes under this threshold</p></li>
<li><p><strong>max_detections</strong> (<em>int</em>) – Maximum number of bounding box predictions</p></li>
<li><p><strong>comet_experiment</strong> (<em>object</em>) – A comet experiment class objects to track</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Mean average precision of the evaluated data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>mAP</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="deepforest.deepforest.deepforest.predict_generator">
<code class="sig-name descname">predict_generator</code><span class="sig-paren">(</span><em class="sig-param">annotations</em>, <em class="sig-param">comet_experiment=None</em>, <em class="sig-param">iou_threshold=0.5</em>, <em class="sig-param">score_threshold=0.05</em>, <em class="sig-param">max_detections=200</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/deepforest.html#deepforest.predict_generator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.deepforest.deepforest.predict_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict bounding boxes for a model using a csv fit_generator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>annotations</strong> (<em>str</em>) – Path to csv label file, labels are in the format -&gt; path/to/image.jpg,x1,y1,x2,y2,class_name</p></li>
<li><p><strong>iou_threshold</strong> (<em>float</em>) – IoU Threshold to count for a positive detection (defaults to 0.5)</p></li>
<li><p><strong>score_threshold</strong> (<em>float</em>) – Eliminate bounding boxes under this threshold</p></li>
<li><p><strong>max_detections</strong> (<em>int</em>) – Maximum number of bounding box predictions</p></li>
<li><p><strong>comet_experiment</strong> (<em>object</em>) – A comet experiment class objects to track</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pandas dataframe of bounding boxes for each image in the annotations file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boxes_output</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="deepforest.deepforest.deepforest.predict_image">
<code class="sig-name descname">predict_image</code><span class="sig-paren">(</span><em class="sig-param">image_path=None</em>, <em class="sig-param">raw_image=None</em>, <em class="sig-param">return_plot=True</em>, <em class="sig-param">score_threshold=0.05</em>, <em class="sig-param">max_detections=200</em>, <em class="sig-param">show=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/deepforest.html#deepforest.predict_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.deepforest.deepforest.predict_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict tree crowns based on loaded (or trained) model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_path</strong> (<em>str</em>) – Path to image on disk</p></li>
<li><p><strong>raw_image</strong> (<em>array</em>) – Numpy image array in BGR channel order following openCV convention</p></li>
<li><p><strong>show</strong> (<em>bool</em>) – Plot the predicted image with bounding boxes. Ignored if return_plot=False</p></li>
<li><p><strong>return_plot</strong> – Whether to return image with annotations overlaid, or just a numpy array of boxes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>if return_plot, an image. Otherwise a numpy array of predicted bounding boxes, with scores and labels</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>predictions (array)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="deepforest.deepforest.deepforest.predict_tile">
<code class="sig-name descname">predict_tile</code><span class="sig-paren">(</span><em class="sig-param">path_to_raster</em>, <em class="sig-param">patch_size=400</em>, <em class="sig-param">patch_overlap=0.1</em>, <em class="sig-param">return_plot=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/deepforest.html#deepforest.predict_tile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.deepforest.deepforest.predict_tile" title="Permalink to this definition">¶</a></dt>
<dd><p>For images too large to input into the model, predict_tile cuts the image into overlapping windows, predicts trees on each window and reassambles into a single array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raster_path</strong> – Path to image on disk</p></li>
<li><p><strong>return_plot</strong> – Should the image be returned with the predictions drawn?</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>if return_plot, an image. Otherwise a numpy array of predicted bounding boxes, scores and labels</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>boxes (array)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="deepforest.deepforest.deepforest.train">
<code class="sig-name descname">train</code><span class="sig-paren">(</span><em class="sig-param">annotations</em>, <em class="sig-param">input_type='fit_generator'</em>, <em class="sig-param">list_of_tfrecords=None</em>, <em class="sig-param">comet_experiment=None</em>, <em class="sig-param">images_per_epoch=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/deepforest.html#deepforest.train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.deepforest.deepforest.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Train a deep learning tree detection model using keras-retinanet.
This is the main entry point for training a new model based on either existing weights or scratch</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>annotations</strong> (<em>str</em>) – Path to csv label file, labels are in the format -&gt; path/to/image.jpg,x1,y1,x2,y2,class_name</p></li>
<li><p><strong>comet_experiment</strong> – A comet ml object to log images. Optional.</p></li>
<li><p><strong>list_of_tfrecords</strong> – Ignored if input_type != “tfrecord”, list of tf records to process</p></li>
<li><p><strong>input_type</strong> – “fit_generator” or “tfrecord”</p></li>
<li><p><strong>images_per_epoch</strong> – number of images to override default config of # images in annotations file / batch size. Useful for debug</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A trained keras model
prediction model: with bbox nms
trained model: without nms</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>model (object)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="deepforest.deepforest.deepforest.use_release">
<code class="sig-name descname">use_release</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/deepforest.html#deepforest.use_release"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.deepforest.deepforest.use_release" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the latest DeepForest model release from github and load model. Optionally download if release doesn’t exist</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A trained keras model</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>model (object)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-deepforest.predict">
<span id="deepforest-predict-module"></span><h2>deepforest.predict module<a class="headerlink" href="#module-deepforest.predict" title="Permalink to this headline">¶</a></h2>
<p>Prediction module. This module consists of predict utility function for the deepforest class</p>
<dl class="function">
<dt id="deepforest.predict.label_to_name">
<code class="sig-prename descclassname">deepforest.predict.</code><code class="sig-name descname">label_to_name</code><span class="sig-paren">(</span><em class="sig-param">image_classes</em>, <em class="sig-param">index</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/predict.html#label_to_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.predict.label_to_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Map label to name.</p>
</dd></dl>

<dl class="function">
<dt id="deepforest.predict.non_max_suppression">
<code class="sig-prename descclassname">deepforest.predict.</code><code class="sig-name descname">non_max_suppression</code><span class="sig-paren">(</span><em class="sig-param">sess</em>, <em class="sig-param">boxes</em>, <em class="sig-param">scores</em>, <em class="sig-param">labels</em>, <em class="sig-param">max_output_size=200</em>, <em class="sig-param">iou_threshold=0.25</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/predict.html#non_max_suppression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.predict.non_max_suppression" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide a tensorflow session and get non-maximum suppression
:param sess: a tensorfloe</p>
<p>max_output_size, iou_threshold are passed to tf.image.non_max_suppression</p>
</dd></dl>

<dl class="function">
<dt id="deepforest.predict.predict_image">
<code class="sig-prename descclassname">deepforest.predict.</code><code class="sig-name descname">predict_image</code><span class="sig-paren">(</span><em class="sig-param">model, image_path=None, raw_image=None, score_threshold=0.05, max_detections=200, return_plot=True, classes=['Tree']</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/predict.html#predict_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.predict.predict_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict invidiual tree crown bounding boxes for a single image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>object</em>) – A keras-retinanet model to predict bounding boxes, either load a model from weights, use the latest release, or train a new model from scratch.</p></li>
<li><p><strong>image_path</strong> (<em>str</em>) – Path to image file on disk</p></li>
<li><p><strong>raw_image</strong> (<em>str</em>) – Numpy image array in BGR channel order following openCV convention</p></li>
<li><p><strong>score_threshold</strong> (<em>float</em>) – Minimum probability score to be included in final boxes, ranging from 0 to 1.</p></li>
<li><p><strong>max_detections</strong> (<em>int</em>) – Maximum number of bounding box predictions per tile</p></li>
<li><p><strong>return_plot</strong> (<em>bool</em>) – If true, return a image object, else return bounding boxes as a numpy array</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If return_plot is TRUE, the image with the overlaid boxes is returned
image_detections: If return_plot is FALSE, a np.array of image_boxes, image_scores, image_labels</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>raw_image (array)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-deepforest.preprocess">
<span id="deepforest-preprocess-module"></span><h2>deepforest.preprocess module<a class="headerlink" href="#module-deepforest.preprocess" title="Permalink to this headline">¶</a></h2>
<p>The preprocessing module is used to reshape data into format suitable for training or prediction. For example cutting large tiles into smaller images.</p>
<dl class="function">
<dt id="deepforest.preprocess.compute_windows">
<code class="sig-prename descclassname">deepforest.preprocess.</code><code class="sig-name descname">compute_windows</code><span class="sig-paren">(</span><em class="sig-param">numpy_image</em>, <em class="sig-param">patch_size</em>, <em class="sig-param">patch_overlap</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/preprocess.html#compute_windows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.preprocess.compute_windows" title="Permalink to this definition">¶</a></dt>
<dd><p>‘Create a sliding window object from a raster tile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>numpy_image</strong> (<em>array</em>) – Raster object as numpy array to cut into crops</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a sliding windows object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>windows (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.preprocess.image_name_from_path">
<code class="sig-prename descclassname">deepforest.preprocess.</code><code class="sig-name descname">image_name_from_path</code><span class="sig-paren">(</span><em class="sig-param">image_path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/preprocess.html#image_name_from_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.preprocess.image_name_from_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert path to image name for use in indexing</p>
</dd></dl>

<dl class="function">
<dt id="deepforest.preprocess.save_crop">
<code class="sig-prename descclassname">deepforest.preprocess.</code><code class="sig-name descname">save_crop</code><span class="sig-paren">(</span><em class="sig-param">base_dir</em>, <em class="sig-param">image_name</em>, <em class="sig-param">index</em>, <em class="sig-param">crop</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/preprocess.html#save_crop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.preprocess.save_crop" title="Permalink to this definition">¶</a></dt>
<dd><p>Save window crop as image file to be read by PIL. Filename should match the image_name + window index</p>
</dd></dl>

<dl class="function">
<dt id="deepforest.preprocess.select_annotations">
<code class="sig-prename descclassname">deepforest.preprocess.</code><code class="sig-name descname">select_annotations</code><span class="sig-paren">(</span><em class="sig-param">annotations</em>, <em class="sig-param">windows</em>, <em class="sig-param">index</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/preprocess.html#select_annotations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.preprocess.select_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Select annotations that overlap with selected image crop</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_name</strong> (<em>str</em>) – Name of the image in the annotations file to lookup.</p></li>
<li><p><strong>annotations_file</strong> – path to annotations file in the format -&gt; image_path, xmin, ymin, xmax, ymax, label</p></li>
<li><p><strong>windows</strong> – A sliding window object (see compute_windows)</p></li>
<li><p><strong>index</strong> – The index in the windows object to use a crop bounds</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pandas dataframe of annotations</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>selected_annotations</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.preprocess.split_raster">
<code class="sig-prename descclassname">deepforest.preprocess.</code><code class="sig-name descname">split_raster</code><span class="sig-paren">(</span><em class="sig-param">path_to_raster</em>, <em class="sig-param">annotations_file</em>, <em class="sig-param">base_dir</em>, <em class="sig-param">patch_size</em>, <em class="sig-param">patch_overlap</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/preprocess.html#split_raster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.preprocess.split_raster" title="Permalink to this definition">¶</a></dt>
<dd><p>Divide a large tile into smaller arrays. Each crop will be saved to file
:param path_to_tile: Path to a tile that can be read by rasterio on disk
:type path_to_tile: str
:param annotations_file: Path to annotations file with data in the format -&gt; image_path, xmin, ymin, xmax, ymax, label
:type annotations_file: str
:param base_dir: Where to save the annotations and image crops relative to current working dir
:type base_dir: str
:param patch_size: Maximum dimensions of square window
:type patch_size: int
:param patch_overlap: Percent of overlap among windows 0-&gt;1
:type patch_overlap: float</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A pandas dataframe with annotations file for training.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-deepforest.retinanet_train">
<span id="deepforest-retinanet-train-module"></span><h2>deepforest.retinanet_train module<a class="headerlink" href="#module-deepforest.retinanet_train" title="Permalink to this headline">¶</a></h2>
<p>Derived from Fizyr keras-retinanet (<a class="reference external" href="https://fizyr.com">https://fizyr.com</a>)</p>
<dl class="function">
<dt id="deepforest.retinanet_train.check_args">
<code class="sig-prename descclassname">deepforest.retinanet_train.</code><code class="sig-name descname">check_args</code><span class="sig-paren">(</span><em class="sig-param">parsed_args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/retinanet_train.html#check_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.retinanet_train.check_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to check for inherent contradictions within parsed arguments.
For example, batch_size &lt; num_gpus
Intended to raise errors prior to backend initialisation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>parsed_args</strong> – parser.parse_args()</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>parsed_args</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.retinanet_train.create_callbacks">
<code class="sig-prename descclassname">deepforest.retinanet_train.</code><code class="sig-name descname">create_callbacks</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">training_model</em>, <em class="sig-param">prediction_model</em>, <em class="sig-param">validation_generator</em>, <em class="sig-param">args</em>, <em class="sig-param">comet_experiment</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/retinanet_train.html#create_callbacks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.retinanet_train.create_callbacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the callbacks to use during training.</p>
<dl class="simple">
<dt>Args</dt><dd><p>model: The base model.
training_model: The model that is used for training.
prediction_model: The model that should be used for validation.
validation_generator: The generator for creating validation data.
args: parseargs args object.
comet_experiment: cometml object to log images</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of callbacks used for training.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.retinanet_train.create_generators">
<code class="sig-prename descclassname">deepforest.retinanet_train.</code><code class="sig-name descname">create_generators</code><span class="sig-paren">(</span><em class="sig-param">args</em>, <em class="sig-param">preprocess_image</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/retinanet_train.html#create_generators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.retinanet_train.create_generators" title="Permalink to this definition">¶</a></dt>
<dd><p>Create generators for training and validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – parseargs object containing configuration for generators.</p></li>
<li><p><strong>preprocess_image</strong> – Function that preprocesses an image for the network.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.retinanet_train.create_models">
<code class="sig-prename descclassname">deepforest.retinanet_train.</code><code class="sig-name descname">create_models</code><span class="sig-paren">(</span><em class="sig-param">backbone_retinanet</em>, <em class="sig-param">num_classes</em>, <em class="sig-param">weights</em>, <em class="sig-param">multi_gpu=0</em>, <em class="sig-param">freeze_backbone=False</em>, <em class="sig-param">lr=1e-05</em>, <em class="sig-param">config=None</em>, <em class="sig-param">targets=None</em>, <em class="sig-param">freeze_layers=0</em>, <em class="sig-param">modifier=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/retinanet_train.html#create_models"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.retinanet_train.create_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates three models (model, training_model, prediction_model).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>backbone_retinanet</strong> – A function to call to create a retinanet model with a given backbone.</p></li>
<li><p><strong>num_classes</strong> – The number of classes to train.</p></li>
<li><p><strong>weights</strong> – The weights to load into the model.</p></li>
<li><p><strong>multi_gpu</strong> – The number of GPUs to use for training.</p></li>
<li><p><strong>freeze_backbone</strong> – If True, disables learning for the backbone.</p></li>
<li><p><strong>config</strong> – Config parameters, None indicates the default configuration.</p></li>
<li><p><strong>targets</strong> – Target tensors if training a model with tfrecord inputs</p></li>
<li><p><strong>freeze_layers</strong> – int layer number to freeze from bottom of the retinanet network during finetuning. e.g. 10 will set layers 0:10 to layer.trainable = False. 0 is default, no freezing.</p></li>
<li><p><strong>modifier</strong> – function that takes in a model and freezes resnet layers, returns modified object</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The base model. This is also the model that is saved in snapshots.
training_model   : The training model. If multi_gpu=0, this is identical to model.
prediction_model : The model wrapped with utility functions to perform object detection (applies regression values and performs NMS).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>model</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.retinanet_train.main">
<code class="sig-prename descclassname">deepforest.retinanet_train.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param">args=None</em>, <em class="sig-param">input_type='fit_generator'</em>, <em class="sig-param">list_of_tfrecords=None</em>, <em class="sig-param">comet_experiment=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/retinanet_train.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.retinanet_train.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Main Training Loop
:param args: Keras retinanet argparse
:param list_of_tfrecords: list of tfrecords to parse
:param input_type: “fit_generator” or “tfrecord” input type</p>
</dd></dl>

<dl class="function">
<dt id="deepforest.retinanet_train.makedirs">
<code class="sig-prename descclassname">deepforest.retinanet_train.</code><code class="sig-name descname">makedirs</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/retinanet_train.html#makedirs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.retinanet_train.makedirs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="deepforest.retinanet_train.model_with_weights">
<code class="sig-prename descclassname">deepforest.retinanet_train.</code><code class="sig-name descname">model_with_weights</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">weights</em>, <em class="sig-param">skip_mismatch</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/retinanet_train.html#model_with_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.retinanet_train.model_with_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Load weights for model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – The model to load weights for.</p></li>
<li><p><strong>weights</strong> – The weights to load.</p></li>
<li><p><strong>skip_mismatch</strong> – If True, skips layers whose shape of weights doesn’t match with the model.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.retinanet_train.parse_args">
<code class="sig-prename descclassname">deepforest.retinanet_train.</code><code class="sig-name descname">parse_args</code><span class="sig-paren">(</span><em class="sig-param">args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/retinanet_train.html#parse_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.retinanet_train.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the arguments.</p>
</dd></dl>

</div>
<div class="section" id="module-deepforest.tfrecords">
<span id="deepforest-tfrecords-module"></span><h2>deepforest.tfrecords module<a class="headerlink" href="#module-deepforest.tfrecords" title="Permalink to this headline">¶</a></h2>
<p>Module: tfrecords</p>
<p>Tfrecords creation and reader for improved performance across multi-gpu
There were a tradeoffs made in this repo. It would be natural to save the generated prepreprocessed image to tfrecord from the generator. This results in enormous (100x) files.
The compromise was to read the original image from file using tensorflow’s data pipeline. The opencv resize billinear method is marginally different then the tensorflow method, so we can assert they are the same array.</p>
<dl class="function">
<dt id="deepforest.tfrecords.create_dataset">
<code class="sig-prename descclassname">deepforest.tfrecords.</code><code class="sig-name descname">create_dataset</code><span class="sig-paren">(</span><em class="sig-param">filepath</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">shuffle=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/tfrecords.html#create_dataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.tfrecords.create_dataset" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> – list of tfrecord files</p></li>
<li><p><strong>batch_size</strong> – number of images per batch</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tensorflow dataset object for model training or prediction</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dataset</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.tfrecords.create_tensors">
<code class="sig-prename descclassname">deepforest.tfrecords.</code><code class="sig-name descname">create_tensors</code><span class="sig-paren">(</span><em class="sig-param">list_of_tfrecords</em>, <em class="sig-param">backbone_name='resnet50'</em>, <em class="sig-param">shuffle=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/tfrecords.html#create_tensors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.tfrecords.create_tensors" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a wired tensor target from a list of tfrecords</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_of_tfrecords</strong> – a list of tfrecord on disk to turn into a tfdataset</p></li>
<li><p><strong>backbone_name</strong> – keras retinanet backbone</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>input tensors of images
targets: target tensors of bounding boxes and classes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>inputs</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.tfrecords.create_tf_example">
<code class="sig-prename descclassname">deepforest.tfrecords.</code><code class="sig-name descname">create_tf_example</code><span class="sig-paren">(</span><em class="sig-param">image</em>, <em class="sig-param">regression_target</em>, <em class="sig-param">class_target</em>, <em class="sig-param">fname</em>, <em class="sig-param">original_image</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/tfrecords.html#create_tf_example"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.tfrecords.create_tf_example" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="deepforest.tfrecords.create_tfrecords">
<code class="sig-prename descclassname">deepforest.tfrecords.</code><code class="sig-name descname">create_tfrecords</code><span class="sig-paren">(</span><em class="sig-param">annotations_file</em>, <em class="sig-param">class_file</em>, <em class="sig-param">backbone_model='resnet50'</em>, <em class="sig-param">image_min_side=800</em>, <em class="sig-param">size=1</em>, <em class="sig-param">savedir='./'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/tfrecords.html#create_tfrecords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.tfrecords.create_tfrecords" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>annotations_file</strong> – path to 6 column data in form image_path, xmin, ymin, xmax, ymax, label</p></li>
<li><p><strong>backbone_model</strong> – A keras retinanet backbone</p></li>
<li><p><strong>image_min_side</strong> – resized image object minimum size</p></li>
<li><p><strong>size</strong> – Number of images per tfrecord</p></li>
<li><p><strong>savedir</strong> – dir path to save tfrecords files</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of path names of written tfrecords</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>written_files</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.tfrecords.model_with_weights">
<code class="sig-prename descclassname">deepforest.tfrecords.</code><code class="sig-name descname">model_with_weights</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">weights</em>, <em class="sig-param">skip_mismatch</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/tfrecords.html#model_with_weights"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.tfrecords.model_with_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Load weights for model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – The model to load weights for.</p></li>
<li><p><strong>weights</strong> – The weights to load.</p></li>
<li><p><strong>skip_mismatch</strong> – If True, skips layers whose shape of weights doesn’t match with the model.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-deepforest.utilities">
<span id="deepforest-utilities-module"></span><h2>deepforest.utilities module<a class="headerlink" href="#module-deepforest.utilities" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="deepforest.utilities.DownloadProgressBar">
<em class="property">class </em><code class="sig-prename descclassname">deepforest.utilities.</code><code class="sig-name descname">DownloadProgressBar</code><span class="sig-paren">(</span><em class="sig-param">iterable=None</em>, <em class="sig-param">desc=None</em>, <em class="sig-param">total=None</em>, <em class="sig-param">leave=True</em>, <em class="sig-param">file=None</em>, <em class="sig-param">ncols=None</em>, <em class="sig-param">mininterval=0.1</em>, <em class="sig-param">maxinterval=10.0</em>, <em class="sig-param">miniters=None</em>, <em class="sig-param">ascii=None</em>, <em class="sig-param">disable=False</em>, <em class="sig-param">unit='it'</em>, <em class="sig-param">unit_scale=False</em>, <em class="sig-param">dynamic_ncols=False</em>, <em class="sig-param">smoothing=0.3</em>, <em class="sig-param">bar_format=None</em>, <em class="sig-param">initial=0</em>, <em class="sig-param">position=None</em>, <em class="sig-param">postfix=None</em>, <em class="sig-param">unit_divisor=1000</em>, <em class="sig-param">write_bytes=None</em>, <em class="sig-param">gui=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/utilities.html#DownloadProgressBar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.utilities.DownloadProgressBar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tqdm.std.tqdm</span></code></p>
<dl class="method">
<dt id="deepforest.utilities.DownloadProgressBar.update_to">
<code class="sig-name descname">update_to</code><span class="sig-paren">(</span><em class="sig-param">b=1</em>, <em class="sig-param">bsize=1</em>, <em class="sig-param">tsize=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/utilities.html#DownloadProgressBar.update_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.utilities.DownloadProgressBar.update_to" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="deepforest.utilities.create_classes">
<code class="sig-prename descclassname">deepforest.utilities.</code><code class="sig-name descname">create_classes</code><span class="sig-paren">(</span><em class="sig-param">annotations_file</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/utilities.html#create_classes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.utilities.create_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a class list in the format accepted by keras retinanet</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>annotations_file</strong> – an annotation csv in the retinanet format path/to/image.jpg,x1,y1,x2,y2,class_name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>path to classes file</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.utilities.format_args">
<code class="sig-prename descclassname">deepforest.utilities.</code><code class="sig-name descname">format_args</code><span class="sig-paren">(</span><em class="sig-param">annotations_file</em>, <em class="sig-param">config</em>, <em class="sig-param">images_per_epoch=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/utilities.html#format_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.utilities.format_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Format config file to match argparse list for retinainet</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>annotations_file</strong> – a path to a csv  dataframe of annotations to get number of images, no header</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – a dictionary object to convert into a list for argparse</p></li>
<li><p><strong>images_per_epoch</strong> (<em>int</em>) – Override default steps per epoch (n images/batch size) by manually setting a number of images</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list structure that mimics argparse input arguments for retinanet</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>arg_list (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.utilities.label_to_name">
<code class="sig-prename descclassname">deepforest.utilities.</code><code class="sig-name descname">label_to_name</code><span class="sig-paren">(</span><em class="sig-param">label</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/utilities.html#label_to_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.utilities.label_to_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Map label to name.</p>
</dd></dl>

<dl class="function">
<dt id="deepforest.utilities.number_of_images">
<code class="sig-prename descclassname">deepforest.utilities.</code><code class="sig-name descname">number_of_images</code><span class="sig-paren">(</span><em class="sig-param">annotations_file</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/utilities.html#number_of_images"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.utilities.number_of_images" title="Permalink to this definition">¶</a></dt>
<dd><p>How many images in the annotations file?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>annotations_file</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of images</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>n (int)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.utilities.read_config">
<code class="sig-prename descclassname">deepforest.utilities.</code><code class="sig-name descname">read_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/utilities.html#read_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.utilities.read_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="deepforest.utilities.read_model">
<code class="sig-prename descclassname">deepforest.utilities.</code><code class="sig-name descname">read_model</code><span class="sig-paren">(</span><em class="sig-param">model_path</em>, <em class="sig-param">config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/utilities.html#read_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.utilities.read_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Read keras retinanet model from keras.model.save()</p>
</dd></dl>

<dl class="function">
<dt id="deepforest.utilities.use_release">
<code class="sig-prename descclassname">deepforest.utilities.</code><code class="sig-name descname">use_release</code><span class="sig-paren">(</span><em class="sig-param">save_dir='data'</em>, <em class="sig-param">prebuilt_model='NEON'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/utilities.html#use_release"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.utilities.use_release" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the existance of, or download the latest model release from github</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_dir</strong> (<em>str</em>) – Directory to save filepath, default to “data” in toplevel repo</p></li>
<li><p><strong>prebuilt_model</strong> – Currently only accepts “NEON”, but could be expanded to include other prebuilt models. The local model will be called {prebuilt_model}.h5 on disk.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>path to downloaded model</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>release_tag, output_path (str)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="deepforest.utilities.xml_to_annotations">
<code class="sig-prename descclassname">deepforest.utilities.</code><code class="sig-name descname">xml_to_annotations</code><span class="sig-paren">(</span><em class="sig-param">xml_path</em>, <em class="sig-param">rgb_dir</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/deepforest/utilities.html#xml_to_annotations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#deepforest.utilities.xml_to_annotations" title="Permalink to this definition">¶</a></dt>
<dd><p>Load annotations from xml format (e.g. RectLabel editor) and convert them into retinanet annotations format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xml_path</strong> (<em>str</em>) – Path to the annotations xml, formatted by RectLabel</p></li>
<li><p><strong>rgb_dir</strong> (<em>str</em>) – Directory path to the rgb dir</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>in the format -&gt; path/to/image.jpg,x1,y1,x2,y2,class_name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Annotations (pandas dataframe)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-deepforest">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-deepforest" title="Permalink to this headline">¶</a></h2>
<p>Top-level package for DeepForest.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../training.html" class="btn btn-neutral float-left" title="Training new models - An Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Ben Weinstein

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>